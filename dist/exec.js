var child_process=require("child_process"),colors=require("colors/safe"),colorList=["red","green","yellow","blue","magenta","cyan","gray"],nextColor=function(){var o=0;return function(){o>=colorList.length&&(o=0);var r=colorList[o];return o=(o+1)%colorList.length,r}}(),exec=function(o){if("string"==typeof o&&(o={command:o}),"string"!=typeof o.command)throw"Invalid command";var r=o.command,n=o.args||o.arguments||[],t=r.split(/\s+/);r=t[0],n=t.slice(1).concat(n);var e=o.tag||r,c=function(){if(o.print)return function(r){o.print(r,e)};for(;e.length<20;)e+=" ";return e=(colors[o.color]||colors[nextColor()])(e),function(o){console.log(e+" "+o)}}(),s=child_process.spawn(r,n),i="",l="";return s.stdout.on("data",function(o){i+=o.toString();for(var r,n;-1!=(r=i.indexOf("\n"));)n=i.substring(0,r),i=i.substring(r+1),c(n)}),s.stderr.on("data",function(o){l+=o.toString();for(var r,n;-1!=(r=l.indexOf("\n"));)n=l.substring(0,r),l=l.substring(r+1),c(colors.red(n))}),s.on("close",function(o){c("* Process exit (code: "+o+")")}),s};exec.colorList=colorList,module.exports=exec;